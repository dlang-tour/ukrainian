# Unicode —É –º–æ–≤—ñ D

Unicode ‚Äì —Ü–µ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É —É –∫–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ–π
—Å–∏—Å—Ç–µ–º—ñ. –ú–æ–≤–∞ D –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î Unicode —è–∫ —É —Å–∞–º—ñ–π –º–æ–≤—ñ, —Ç–∞–∫ —ñ —É
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ–π –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ.

## –©–æ —ñ –ß–æ–º—É

–ö–æ–º–ø'—é—Ç–µ—Ä–∏, –Ω–∞ –Ω–∞–π–Ω–∏–∂—á–æ–º—É —Ä—ñ–≤–Ω—ñ, –Ω–µ –º–∞—é—Ç—å –∂–æ–¥–Ω–æ–≥–æ —É—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ —Ç–µ,
—â–æ —Å–æ–±–æ—é –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Ç–µ–∫—Å—Ç, –∞–¥–∂–µ –≤–æ–Ω–∏ –∑–∞–π–º–∞—é—Ç—å—Å—è –≤–∏–∫–ª—é—á–Ω–æ —á–∏—Å–ª–∞–º–∏.
–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏–π –∫–æ–¥ –ø–æ—Ç—Ä–µ–±—É—î —Å–ø–æ—Å—ñ–± –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è
—Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –∑/–Ω–∞ –±—ñ–Ω–∞—Ä–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è. –ú–µ—Ç–æ–¥ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
–Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è *encoding scheme (—Å—Ö–µ–º–æ—é –∫–æ–¥—É–≤–∞–Ω–Ω—è)*, –∞ Unicode —î —Å–∞–º–µ
–æ–¥–Ω—ñ—î—é –∑ —Ç–∞–∫–∏—Ö —Å—Ö–µ–º.

–©–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —á–∏—Å–ª–æ–≤–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è, —â–æ –ª–µ–∂–∏—Ç—å –≤ –æ—Å–Ω–æ–≤—ñ —Ä—è–¥–∫–∞, –Ω–∞–≤–µ–¥–µ–Ω–æ–≥–æ
—É –ø—Ä–∏–∫–ª–∞–¥—ñ, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–¥.

Unicode —î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º —Ç–æ–º—É, —â–æ –π–æ–≥–æ –¥–∏–∑–∞–π–Ω –¥–æ–∑–≤–æ–ª—è—î –æ—Ö–æ–ø–∏—Ç–∏ –≤—Å—ñ –º–æ–≤–∏
—Å–≤—ñ—Ç—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ç—É –∂ —Å—Ö–µ–º—É –∫–æ–¥—É–≤–∞–Ω–Ω—è. –î–æ –ø–æ—è–≤–∏ Unicode,
–∫–æ–º–ø'—é—Ç–µ—Ä–∏, —â–æ —Ä–æ–∑—Ä–æ–±–ª—è–ª–∏—Å—è —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–º–ø–∞–Ω—ñ—è–º–∏ —ñ –¥–æ—Å—Ç–∞–≤–ª—è–ª–∏—Å—è —É —Ä—ñ–∑–Ω—ñ
—á–∞—Å—Ç–∏–Ω–∏ —Å–≤—ñ—Ç—É, –º–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏ —ñ–∑ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—î—é, –∞ —Å—Ö–µ–º–∞ –∫–æ–¥—É–≤–∞–Ω–Ω—è —á–∞—Å—Ç–æ
–±—É–ª–∞ –≤–∑–∞–≥–∞–ª—ñ –≤—ñ–¥—Å—É—Ç–Ω—è, —â–æ —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é–≤–∞–ª–æ –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–µ–∫—Å—Ç—É –Ω–∞ —Ç–∞–∫—ñ–π –º–∞—à–∏–Ω—ñ.

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —â–æ–¥–æ Unicode, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ
–ø–æ—Å–∏–ª–∞–Ω–Ω—è, –ø—Ä–∏—Å–≤—è—á–µ–Ω—ñ Unicode —É —Ä–æ–∑–¥—ñ–ª—ñ "–ü–æ–≥–ª–∏–±–ª–µ–Ω–Ω—è" —É Wikipedia.

## –Ø–∫

Unicode –≤–ø–æ—Ä–∞–≤—Å—è –∑ –±—ñ–ª—å—à—ñ—Å—Ç—é —Ü–∏—Ö –ø—Ä–æ–±–ª–µ–º —ñ —Ç–µ–ø–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –Ω–∞ –∫–æ–∂–Ω—ñ–π
—Å—É—á–∞—Å–Ω—ñ–π –º–∞—à–∏–Ω—ñ. –í—Ä–∞—Ö–æ–≤—É—é—á–∏ –ø–æ–º–∏–ª–∫–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –º–æ–≤, **—É—Å—ñ** —Ä—è–¥–∫–∏ —É
–º–æ–≤—ñ D —î —Ä—è–¥–∫–∞–º–∏ Unicode. –£ —Ç–æ–π –∂–µ —á–∞—Å —Ä—è–¥–∫–∏ —É —Ç–∞–∫–∏—Ö –º–æ–≤–∞—Ö, —è–∫ C —ñ C++
—î –∑–≤–∏—á–∞–π–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º –±–∞–π—Ç—ñ–≤.

–£ –º–æ–≤—ñ D, `string`, `wstring`, —ñ `dstring` ‚Äì —Ü–µ –∑–∞–∫–æ–¥–æ–≤–∞–Ω—ñ —Ä—è–¥–∫–∏
UTF-8, UTF-16, —Ç–∞ UTF-32 –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ. –á—Ö –∑–Ω–∞–∫–æ–≤—ñ —Ç–∏–ø–∏ ‚Äì —Ü–µ `char`,
`wchar`, —ñ `dchar`.

–ó–≥—ñ–¥–Ω–æ –∑—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é, –ø–æ–º–∏–ª–∫–æ–≤–∏–º —î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –Ω–µ-Unicode –¥–∞–Ω–∏—Ö —É
—Ç–∏–ø–∞—Ö —Ä—è–¥–∫—ñ–≤ –º–æ–≤–∏ D, –∞–¥–∂–µ —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Ä—ñ–∑–Ω–æ–≥–æ —Ä–æ–¥—É –ø–æ–º–∏–ª–æ–∫.

–î–ª—è —Ç–æ–≥–æ, —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ —ñ–Ω—à—ñ —Ä—è–¥–∫–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è, –∞–±–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ
–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ C/C++, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ubyte[]` –∞–±–æ `char*`

## –†—è–¥–∫–∏ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö –¥—ñ–∞–ø–∞–∑–æ–Ω—É

*–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ä–æ–∑–¥—ñ–ª [–ü–µ—Ä–ª–∏–Ω–∏ —É –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö –¥—ñ–∞–ø–∞–∑–æ–Ω—É](gems/range-algorithms)
—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ —Ü–∏–º —Ä–æ–∑–¥—ñ–ª–æ–º.*

–Ñ –∫—ñ–ª—å–∫–∞ –≤–∞–∂–ª–∏–≤–∏—Ö –∑–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω—å —â–æ–¥–æ Unicode, —è–∫—ñ —Ç—Ä–µ–±–∞ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏.

–ü–æ-–ø–µ—Ä—à–µ, —è–∫ –æ–∑–Ω–∞–∫–∞ –∑—Ä—É—á–Ω–æ—Å—Ç—ñ, –≤–∏–∫–æ–Ω—É—é—á–∏ —ñ—Ç–µ—Ä–∞—Ü—ñ—é –ø–æ —Ä—è–¥–∫—É –∑–∞
–¥–æ–ø–æ–º–æ–≥–æ—é —Ñ—É–Ω–∫—Ü—ñ–π –¥—ñ–∞–ø–∞–∑–æ–Ω—É, Phobos –±—É–¥–µ –∫–æ–¥—É–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ `string` —ñ
`wstrings` —É –∫–æ–¥–æ–≤—ñ —Å–∏–º–≤–æ–ª–∏ UTF-32. –¶—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –≤—ñ–¥–æ–º–∞ —è–∫ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ
–¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è**, –æ–∑–Ω–∞—á–∞—î –Ω–∞—Å—Ç—É–ø–Ω–µ

```
static assert(is(typeof(utf8.front) == dchar));
```

–¢–∞–∫–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –º–∞—î –±–∞–≥–∞—Ç–æ —É—Å–∫–ª–∞–¥–Ω–µ–Ω—å, –æ—Å–Ω–æ–≤–Ω–µ –∑ —è–∫–∏—Ö –ø–æ–ª—è–≥–∞—î —É —Ç–æ–º—É, —â–æ
–±—ñ–ª—å—à—ñ—Å—Ç—å –ª—é–¥–µ–π –∑–±–∏—Ç—ñ –∑ –ø–∞–Ω—Ç–µ–ª–∏–∫—É, –∞–¥–∂–µ `std.traits.hasLength!(string)`
—î —Ç–æ—Ç–æ–∂–Ω–∏–º –¥–æ `False`. –ß–æ–º—É? –¢–æ–º—É —â–æ —É –º–µ–∂–∞—Ö –¥—ñ–∞–ø–∞–∑–æ–Ω—É API, `–¥–æ–≤–∂–∏–Ω–∞ 
—Ä—è–¥–∫–∞` —Å–∫–æ—Ä—ñ—à–µ –ø–æ–≤–µ—Ä–Ω–µ **–∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ä—è–¥–∫—É**, –∞ –Ω–µ –Ω–∞–¥–ª–∏—à–æ–∫
–∫—ñ–ª—å–∫–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ *—Ñ—É–Ω–∫—Ü—ñ—ó –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤*.

–ó –ø—Ä–∏–∫–ª–∞–¥—É –º–æ–∂–Ω–∞ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —á–æ–º—É —Ü—ñ –¥–≤—ñ —Ä–µ—á—ñ –Ω–µ –∑–∞–≤–∂–¥–∏ —Ç–æ—Ç–æ–∂–Ω—ñ.
–ê–ª–≥–æ—Ä–∏—Ç–º–∏ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ —É Phobos –¥—ñ—é—Ç—å —Ç–∞–∫, –Ω—ñ–±–∏ `—Ä—è–¥–∫–∏` –Ω–µ –º–∞—é—Ç—å
—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Å—Ç–æ—Å–æ–≤–Ω–æ –¥–æ–≤–∂–∏–Ω–∏.

–î–ª—è –±—ñ–ª—å—à –¥–æ–∫–ª–∞–¥–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —â–æ–¥–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ
–¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è —ñ —â–æ–¥–æ –π–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –≤–∞—à–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ
–ø–æ—Å–∏–ª–∞–Ω–Ω—è —É —Ä–æ–∑–¥—ñ–ª—ñ "–ü–æ–≥–ª–∏–±–ª–µ–Ω–Ω—è".

### –ü–æ–≥–ª–∏–±–ª–µ–Ω–Ω—è

- [Unicode —É Wikipedia](https://en.wikipedia.org/wiki/Unicode)
- [–ë–∞–∑–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó Unicode –≤ Phobos](https://dlang.org/phobos/std_uni.html)
- [–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è UTF —É Phobos](https://dlang.org/phobos/std_utf.html)
- [–ë—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ –∞–≤—Ç–æ–¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è](https://jackstouffer.com/blog/d_auto_decoding_and_you.html)
- [–ë—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ –ø–µ—Ä–µ–≤–∞–≥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è UTF-8](http://utf8everywhere.org/)

## {SourceCode}

```d
import std.range.primitives : empty,
    front, popFront;
import std.stdio : write, writeln;

void main()
{
    string utf8 = "√• √∏ ‚àë üò¶";
    wstring utf16 = "√• √∏ ‚àë üò¶";
    dstring utf32 = "√• √∏ ‚àë üò¶";

    writeln("utf8 –¥–æ–≤–∂–∏–Ω–∞: ", utf8.length);
    writeln("utf16 –¥–æ–≤–∂–∏–Ω–∞: ", utf16.length);
    writeln("utf32 –¥–æ–≤–∂–∏–Ω–∞: ", utf32.length);

    foreach (item; utf8)
    {
        auto c = cast(ubyte) item;
        write(c, " ");
    }
    writeln();

	// –û—Å–∫—ñ–ª—å–∫–∏ –∑–∞–∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø –µ–ª–µ–º–µ–Ω—Ç–∞ —î
    // dchar, –¥–∞–ª–µ–∫–æ–≥–ª—è–¥–Ω–∏–º —î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
    // –¥–ª—è –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ä—è–¥–æ–∫ —É UTF-32.
    // –î–ª—è –Ω–µ —Ä—è–¥–∫—ñ–≤, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ
    // –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ (cast)
    foreach (dchar item; utf16)
    {
        auto c = cast(ushort) item;
        write(c, " ");
    }
    writeln();

    // —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è
    static assert(
        is(typeof(utf8[0]) == immutable(char))
    );
    static assert(
        is(typeof(utf8.front) == dchar)
    );
}
```
